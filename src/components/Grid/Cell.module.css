.cell {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--color-background);
  cursor: pointer;
  transition: background-color 0.1s;
  position: relative;
  user-select: none;
  -webkit-user-select: none;
  -webkit-tap-highlight-color: transparent;
}

.cell:hover {
  filter: brightness(0.95);
}

/* ===========================================
   BASE STATES
   =========================================== */

/* Given cells - always have distinct background */
.given {
  background-color: var(--color-given);
}

/* ===========================================
   HIGHLIGHTING LAYERS
   =========================================== */

/* Row/column/box highlight for empty cells */
.highlighted {
  background-color: var(--color-highlight);
}

/* Row/column/box highlight for GIVEN cells - darker shade */
.givenHighlighted {
  background-color: var(--color-given-highlighted);
}

/* Identical number highlight */
.identical {
  background-color: var(--color-identical);
  box-shadow: inset 0 0 0 2px var(--color-primary);
}

/* Identical highlight for given cells */
.givenIdentical {
  background-color: var(--color-given-identical);
  box-shadow: inset 0 0 0 2px var(--color-primary);
}

/* ===========================================
   SELECTED CELL (highest priority)
   =========================================== */

.selected {
  background-color: var(--color-selected) !important;
  box-shadow: none !important;
}

.selected .value {
  color: var(--color-selected-text, var(--color-background));
}

/* ===========================================
   ERROR STATES
   =========================================== */

.mistake .value {
  color: var(--color-error);
}

.conflict {
  background-color: var(--color-conflict) !important;
}

.conflict .value {
  color: var(--color-error);
}

/* ===========================================
   VALUE STYLING
   =========================================== */

.value {
  font-size: clamp(1.25rem, 5vmin, 2.5rem);
  font-weight: 700;
  color: var(--color-text);
  line-height: 1;
}

/* Given numbers can be slightly bolder/different if desired */
.given .value {
  color: var(--color-text);
}

/* ===========================================
   NOTES (pencil marks)
   =========================================== */

.notes {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  width: 100%;
  height: 100%;
  padding: 2px;
}

.noteActive,
.noteInactive {
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: clamp(0.5rem, 1.5vmin, 0.75rem);
  font-weight: 600;
  line-height: 1;
}

.noteActive {
  color: var(--color-text-dim);
}

.noteInactive {
  color: transparent;
}

/* ===========================================
   3x3 BOX BORDERS
   =========================================== */

.rightBorder {
  border-right: 2px solid var(--color-border-thick, var(--color-text)) !important;
}

.bottomBorder {
  border-bottom: 2px solid var(--color-border-thick, var(--color-text)) !important;
}

/* ===========================================
   RESPONSIVE
   =========================================== */

/* Touch devices */
@media (hover: none) and (pointer: coarse) {
  .cell {
    min-height: 36px;
  }
  
  .cell:hover {
    filter: none;
  }
}

/* Small screens */
@media (max-width: 400px) {
  .value {
    font-size: clamp(1rem, 6vw, 1.5rem);
  }

  .noteActive,
  .noteInactive {
    font-size: 0.45rem;
  }

  .notes {
    padding: 1px;
  }
}